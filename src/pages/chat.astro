---
import SidebarLayout from '../layouts/SidebarLayout.astro';
import ChatComponent from '../components/ChatComponent.tsx';
import SessionTimer from '../components/SessionTimer.tsx';

// Check if this is a new session based on URL parameters
const url = new URL(Astro.request.url);
const isNewSession = url.searchParams.get('new') === 'true';

// Use dynamic session handling instead of hardcoded session ID
const sessionId = isNewSession ? undefined : "session_12345";
---

<SidebarLayout title="Genascope Chat">
  <SessionTimer client:load />
  <main class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold text-center mb-8 text-blue-700">Genascope Chat</h1>
    <ChatComponent sessionId={sessionId} isNewSession={isNewSession} client:load />
  </main>
</SidebarLayout>
